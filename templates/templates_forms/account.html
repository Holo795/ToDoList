<link rel="stylesheet" type="text/css" href="../../static/styles/templates_forms_styles/account.css" />
<div id="account_form_parent">
    <div id="account_form">
        <img src="../../static/icons/close_blanc.png" id="close_task" alt="Fermer" title="Fermer">

        <h2>Informations du compte</h2>
        <form action="{ url_for('add_type') }" method="POST">
            <div class="input_box">
                <input type="text" name="username" id="id" autocomplete="off" value="{{ user.get_username() }}" required>
                <label>Identifiant</label>
                <span></span>
            </div>

            <div class="input_box">
                <input type="password" name="password" id="mdp" autocomplete="off" value="" required>
                <label>Mot de passe</label>
                <span></span>
            </div>

			<div id="categories">
				<h3>Catégories :</h3>
				<ul>
                    {% for type in user.get_types() %}
                        <li>{{ type[1] }}</li>
                    {% endfor %}
				</ul>
            </div>
				
			<input type="button" value="Nouvelle catégorie" onclick="nouvelle_categorie()"/>
				
			


            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                
                {% for category, message in messages %}
                    {%  if category == "error" %}
                        <p id="error">{{ message }}</p>
                    {% elif category == "success" %}
                        <p id="success">{{ message }}</p>
                    {% endif %}
                {% endfor %}
                
            {% endif %}
            {% endwith %}

            <div id="boutons">
                <input type="submit" value="Enregistrer"/>
            </div>
            <script>
                

				function nouvelle_categorie() {
					console.log("oui")
					document.getElementById("categories").querySelector("ul").innerHTML += "<li><input type='text' name='new_type'></li>" 
				}
            </script>

        </form>
    </div>
</div>

